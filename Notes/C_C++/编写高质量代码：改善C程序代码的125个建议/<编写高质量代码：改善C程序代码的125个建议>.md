# 编写高质量代码：改善C程序代码的125个建议

## 1.1 在 GCC 编译器中，针对不同版本的 C 语言标准，可以通过在命令行使用 `-std`选项来选择：

1. C89 或 C90

   ```sh
   -ansi
   -std=c90
   -std=iso9899:1990
   ```

2. C95

   ```sh
   -std=iso9899:199409
   ```

3. C99

   ```sh
   -std=c99
   -std=iso9899:1999
   ```

4. C11

   ```sh
   -std=c11
   -std=iso9899:2011
   ```

5. 除此之外，如果需要在 GCC 中使用 C 扩展，还可以通过如下参数形式实现：

   ```sh
   C89或C90：-std=gnu90
   C99：-std=gnu99
   C11：-std=gnu11
   ```



##2.1 C 的数据类型关键字

| K&R C 的关键字 | C80/C90 关键字 | C99 关键字 |
| :------------- | :------------- | :--------- |
| int            | signed         | _Bool      |
| long           | void           | _Complex   |
| short          |                | _Imaginary |
| unsigned       |                |            |
| char           |                |            |
| float          |                |            |
| double         |                |            |



## 2.2 `char`类型的变量的值应该限制在`signed char`与`unsigned char`的交集范围内



## 2.3 使用`rsize_t`或`size_t`类型来表示一个对象所占用空间的整数值单位

任何表示对象长度的变量，包括作为大小、索引、循环计数和长度的整数值，都可以声明为`size_t`类型



## 2.4 禁止把`size_t`类型和它所代表的真实类型混用

即不要使用如下代码：

```c
unsigned int x;
size_t y;
x = y;
```



## 2.5 小心使用无符号类型带来的陷阱

详见测试代码`test_src/t_2_5.c`

**当有符号整数类型和无符号整数类型进行运算时，有符号整数类型会先自动转换成无符号整数类型**



## 2.6 防止无符号整数回绕

如果数值超过无符号整型数据的限定长度时就会发生回绕，即如果无符号整型变量的值超过了无符号整型的上限，就会返回0，然后又从0开始增大；如果无符号整型变量的值低于无符号整型的下限，那么就会到达无符号整型的上限，然后从上限开始减小



## 2.7 防止有符号整数溢出



## 3.1 了解 IEEE 754 浮点数
- 向左移动二进制小数点一位相当于这个数处以2，而向右移动二进制小数点一位相当于这个数乘以2

- 一个十进制小数要能用浮点数精确地表示，最后一位必须是5（是必要条件，并非充分条件）

- 如果要将十进制数转换成二进制数，则需要把整数部分和小数部分分别转换。其中，整数部分除以2，取余数；小数部分乘以2，取整数位

